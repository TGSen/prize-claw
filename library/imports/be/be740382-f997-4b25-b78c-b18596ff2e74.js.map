{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "startBtn",
    "default",
    "type",
    "Node",
    "border",
    "pitAround",
    "stakeLayout",
    "stakeBtns",
    "ruleBtn",
    "addBtn",
    "giftBtn",
    "claw",
    "rule",
    "prompt",
    "stake",
    "result",
    "score",
    "onLoad",
    "init",
    "listen",
    "window",
    "_main",
    "api",
    "monitor",
    "zIndex",
    "matchId",
    "active",
    "record",
    "node",
    "stakeValue",
    "getModelList",
    "setMatch",
    "index",
    "id",
    "btn",
    "getComponent",
    "Sprite",
    "spriteFrame",
    "spriteFrames",
    "stakeBtnPress",
    "text",
    "getChildByName",
    "stopAllActions",
    "runAction",
    "jumpTo",
    "setStake",
    "getPrizeList",
    "val",
    "matchM",
    "matchL",
    "matchS",
    "then",
    "res",
    "data",
    "ok",
    "r",
    "forEach",
    "item",
    "i",
    "Label",
    "string",
    "name",
    "_matchId",
    "_openState",
    "openState",
    "_value",
    "goldExpend",
    "stakeBtnDisable",
    "gift",
    "build",
    "showResult",
    "results",
    "grabResultInt",
    "loader",
    "getRes",
    "SpriteFrame",
    "grabResultStr",
    "sequence",
    "jumpBy",
    "callFunc",
    "setTimeout",
    "on",
    "EventType",
    "TOUCH_START",
    "audio",
    "clickStart",
    "play",
    "startBtnPress",
    "TOUCH_END",
    "startBtnNormal",
    "alert",
    "user",
    "balance",
    "shop",
    "show",
    "fall",
    "_index",
    "event",
    "stopPropagation",
    "stakeBtnNormal",
    "moveTo",
    "setModel",
    "scale"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "import Claw from 'claw'\r\nimport Rule from 'rule'\r\nimport Prompt from 'prompt'\r\n\r\nexport default cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        startBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        border: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        pitAround: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        stakeLayout: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        stakeBtns: {\r\n            default: [],\r\n            type: cc.Node\r\n        },\r\n        ruleBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        addBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        giftBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        claw: {\r\n            default: null,\r\n            type: Claw\r\n        },\r\n        rule: {\r\n            default: null,\r\n            type: Rule\r\n        },\r\n        prompt: {\r\n            default: null,\r\n            type: Prompt\r\n        },\r\n        stake: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        result: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        score: {\r\n            default: null,\r\n            type: cc.Node\r\n        }\r\n    },\r\n    onLoad() {\r\n        this.init()\r\n        this.listen()\r\n        window._main.api.monitor('进入游戏', 1)\r\n    },\r\n    init() {\r\n\r\n        // 坑下围 zIndex < gift.zIndex\r\n        this.pitAround.zIndex = 1\r\n\r\n        // 场次id\r\n        this.matchId = null\r\n\r\n\r\n\r\n        // 隐藏结果提示框\r\n        this.result.active = false\r\n\r\n        // 隐藏获奖记录\r\n        window._main.record.node.active = false\r\n\r\n        // 设置边框的 zIndex\r\n        this.border.zIndex = 3\r\n\r\n        // 按钮 zIndex\r\n        this.stakeLayout.zIndex =\r\n        this.startBtn.zIndex = 3\r\n\r\n        // 设置下注按钮 zIndex\r\n        this.stake.zIndex = 3\r\n\r\n        // 下注值\r\n        this.stakeValue = null\r\n\r\n        // 获取场次\r\n        this.getModelList()\r\n\r\n    },\r\n\r\n    setMatch(index, id) {\r\n        const btn = this.stakeBtns[index]\r\n\r\n        btn.getComponent(cc.Sprite).spriteFrame =\r\n            window._main.spriteFrames.stakeBtnPress\r\n\r\n        const text = btn.getChildByName('text')\r\n        text.stopAllActions()\r\n        text.runAction(cc.jumpTo(1, 0, 9, 10, 3))\r\n\r\n        // 设置 当前下注值\r\n        this.setStake(index)\r\n\r\n        // 设置 当前场次 id\r\n        this.matchId = id\r\n\r\n        this.getPrizeList()\r\n\r\n    },\r\n\r\n    setStake(val) {\r\n        switch (val) {\r\n            case 1:\r\n                this.stake.getComponent(cc.Sprite).spriteFrame =\r\n                    window._main.spriteFrames.matchM\r\n                break\r\n            case 2:\r\n                this.stake.getComponent(cc.Sprite).spriteFrame =\r\n                    window._main.spriteFrames.matchL\r\n                break\r\n            default:\r\n                this.stake.getComponent(cc.Sprite).spriteFrame =\r\n                    window._main.spriteFrames.matchS\r\n                break\r\n        }\r\n    },\r\n\r\n    // 获取可玩场次\r\n    getModelList() {\r\n        window._main.api.getModelList()\r\n        .then(res => {\r\n            if (res.data.ok) {\r\n\r\n                res.data.r.forEach((item, i) => {\r\n                    this.stakeBtns[i].active = true\r\n                    this.stakeBtns[i].getChildByName('text')\r\n                        .getComponent(cc.Label).string = item.name\r\n\r\n                    this.stakeBtns[i]._matchId = item.id\r\n                    this.stakeBtns[i]._openState = item.openState\r\n                    this.stakeBtns[i]._value = item.goldExpend\r\n\r\n                    // 非开放状态\r\n                    if (!item.openState) {\r\n                        this.stakeBtns[i].getComponent(cc.Sprite)\r\n                            .spriteFrame = window._main.spriteFrames.stakeBtnDisable\r\n                    } else if (this.stakeValue === null) {\r\n                        this.stakeValue = item.goldExpend\r\n                        this.setMatch(i, item.id)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },\r\n\r\n    // 获取奖品列表\r\n    getPrizeList() {\r\n        window._main.api.getPrizeList(this.matchId)\r\n        .then(res => {\r\n            if (res.data.ok) {\r\n                window._main.gift.build(res.data.r)\r\n            }\r\n        })\r\n    },\r\n\r\n    showResult(results) {\r\n        if (results.grabResultInt === 3) {\r\n            this.result.getComponent(cc.Sprite)\r\n                .spriteFrame = cc.loader.getRes('image/game/result-win', cc.SpriteFrame)\r\n        } else {\r\n            this.result.getComponent(cc.Sprite)\r\n                .spriteFrame = cc.loader.getRes('image/game/result-fail', cc.SpriteFrame)\r\n        }\r\n\r\n        this.result.active = true\r\n        this.result.getChildByName('text')\r\n            .getComponent(cc.Label).string = results.grabResultStr\r\n        this.result.runAction(cc.sequence(\r\n            cc.jumpBy(.5, 0, 0, 10, 3),\r\n            cc.callFunc(() => {\r\n                setTimeout(() => {\r\n                    this.result.active = false\r\n                }, 1000)\r\n            })\r\n        ))\r\n\r\n\r\n    },\r\n\r\n    listen() {\r\n        // 开始按钮\r\n        this.startBtn.on(\r\n            cc.Node.EventType.TOUCH_START,\r\n            () => {\r\n                window._main.audio.clickStart.play()\r\n                this.startBtn.getComponent(cc.Sprite).spriteFrame =\r\n                    window._main.spriteFrames.startBtnPress\r\n            }\r\n        )\r\n        this.startBtn.on(\r\n            cc.Node.EventType.TOUCH_END,\r\n            () => {\r\n                this.startBtn.getComponent(cc.Sprite).spriteFrame =\r\n                    window._main.spriteFrames.startBtnNormal\r\n                if (this.matchId === null) alert('请先下注')\r\n                else if (window._main.user.balance < this.stakeValue) {\r\n                    window._main.shop.show()\r\n                }\r\n                else this.claw.fall()\r\n\r\n                window._main.api.monitor('开始按钮', 6)\r\n            }\r\n        )\r\n\r\n        // 下注按钮\r\n        this.stakeBtns.forEach((btn, index) => {\r\n            btn._index = index\r\n            btn.on(\r\n                cc.Node.EventType.TOUCH_START,\r\n                event => {\r\n\r\n                    // 禁选\r\n                    if (!btn._openState) {\r\n                        event.stopPropagation()\r\n                        return\r\n                    }\r\n\r\n                    const val = btn._value\r\n                    if (val > window._main.user.balance) {\r\n                        window._main.shop.show()\r\n                        return\r\n                    }\r\n                    this.stakeValue = val\r\n\r\n                    this.stakeBtns.forEach(btn => {\r\n                        if (btn._openState) {\r\n                            btn.getComponent(cc.Sprite).spriteFrame =\r\n                                window._main.spriteFrames.stakeBtnNormal\r\n                        } else {\r\n                            btn.getComponent(cc.Sprite).spriteFrame =\r\n                                window._main.spriteFrames.stakeBtnDisable\r\n                        }\r\n                        // 移除其他特效\r\n                        btn.getChildByName('text')\r\n                            .stopAllActions()\r\n                        btn.getChildByName('text')\r\n                            .runAction(cc.moveTo(0, 0, 18))\r\n\r\n                    })\r\n\r\n                    btn.getComponent(cc.Sprite).spriteFrame =\r\n                        window._main.spriteFrames.stakeBtnPress\r\n\r\n                    const text = btn.getChildByName('text')\r\n\r\n\r\n                    text.stopAllActions()\r\n                    text.runAction(cc.jumpTo(1, 0, 9, 10, 3))\r\n\r\n                    // 下注\r\n                    this.setStake(btn._index)\r\n\r\n                    switch(btn._index) {\r\n                        case 0:\r\n                            window._main.api.monitor('500场', 3)\r\n                            break\r\n                        case 1:\r\n                            window._main.api.monitor('1000场', 4)\r\n                            break\r\n                        case 2:\r\n                            window._main.api.monitor('2000场', 5)\r\n                            break\r\n                    }\r\n\r\n\r\n                    // 设置 当前场次 id\r\n                    this.matchId = btn._matchId\r\n\r\n                    // 获取奖品列表\r\n                    this.getPrizeList()\r\n\r\n                    /*\r\n                    * 高级场切换\r\n                    */\r\n                    this.claw.setModel(this.matchId)\r\n                }\r\n            )\r\n        })\r\n\r\n        // 规则按钮\r\n        this.ruleBtn.on(\r\n            cc.Node.EventType.TOUCH_START,\r\n            () => {\r\n                this.ruleBtn.scale = .95\r\n            }\r\n        )\r\n        this.ruleBtn.on(\r\n            cc.Node.EventType.TOUCH_END,\r\n            () => {\r\n                this.ruleBtn.scale = 1\r\n                this.rule.show()\r\n            }\r\n\r\n        )\r\n\r\n        // giftBtn\r\n        this.giftBtn.on(\r\n            cc.Node.EventType.TOUCH_START,\r\n            () => {\r\n                this.giftBtn.scale = .95\r\n            }\r\n        )\r\n        this.giftBtn.on(\r\n            cc.Node.EventType.TOUCH_END,\r\n            () => {\r\n                this.giftBtn.scale = 1\r\n                window._main.record.show()\r\n            }\r\n        )\r\n\r\n        // addBtn\r\n        this.addBtn.on(\r\n            cc.Node.EventType.TOUCH_START,\r\n            () => {\r\n                this.addBtn.scale = .95\r\n            }\r\n        )\r\n        this.addBtn.on(\r\n            cc.Node.EventType.TOUCH_END,\r\n            () => {\r\n                this.addBtn.scale = 1\r\n                window._main.shop.show()\r\n            }\r\n        )\r\n    }\r\n})\r\n"
  ]
}