{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "startBtn",
    "default",
    "type",
    "Node",
    "border",
    "pitAround",
    "stakeLayout",
    "stakeBtns",
    "ruleBtn",
    "addBtn",
    "giftBtn",
    "claw",
    "rule",
    "prompt",
    "stake",
    "result",
    "score",
    "onLoad",
    "init",
    "listen",
    "main",
    "node",
    "parent",
    "getComponent",
    "zIndex",
    "matchId",
    "active",
    "record",
    "stakeValue",
    "getModelList",
    "setMatch",
    "index",
    "id",
    "btn",
    "Sprite",
    "spriteFrame",
    "spriteFrames",
    "stakeBtnPress",
    "text",
    "getChildByName",
    "stopAllActions",
    "runAction",
    "jumpTo",
    "setStake",
    "getPrizeList",
    "val",
    "matchM",
    "matchL",
    "matchS",
    "api",
    "then",
    "res",
    "data",
    "ok",
    "r",
    "forEach",
    "item",
    "i",
    "Label",
    "string",
    "name",
    "_matchId",
    "_openState",
    "openState",
    "_value",
    "goldExpend",
    "stakeBtnDisable",
    "gift",
    "build",
    "showResult",
    "results",
    "grabResultInt",
    "loader",
    "getRes",
    "SpriteFrame",
    "grabResultStr",
    "sequence",
    "jumpBy",
    "callFunc",
    "setTimeout",
    "on",
    "EventType",
    "TOUCH_START",
    "audio",
    "clickStart",
    "play",
    "startBtnPress",
    "TOUCH_END",
    "startBtnNormal",
    "alert",
    "user",
    "balance",
    "shop",
    "show",
    "fall",
    "_index",
    "event",
    "stopPropagation",
    "stakeBtnNormal",
    "moveTo",
    "setModel",
    "scale"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "import Claw from 'claw'\r\nimport Rule from 'rule'\r\nimport Prompt from 'prompt'\r\n\r\nexport default cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        startBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        border: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        pitAround: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        stakeLayout: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        stakeBtns: {\r\n            default: [],\r\n            type: cc.Node\r\n        },\r\n        ruleBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        addBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        giftBtn: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        claw: {\r\n            default: null,\r\n            type: Claw\r\n        },\r\n        rule: {\r\n            default: null,\r\n            type: Rule\r\n        },\r\n        prompt: {\r\n            default: null,\r\n            type: Prompt\r\n        },\r\n        stake: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        result: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        score: {\r\n            default: null,\r\n            type: cc.Node\r\n        }\r\n    },\r\n    onLoad() {\r\n        this.init()\r\n        this.listen()\r\n    },\r\n    init() {\r\n        /*\r\n        * 初始化时\r\n        * 获取 main 组件\r\n        */\r\n        this.main = this.node.parent.getComponent('main')\r\n\r\n        // 坑下围 zIndex < gift.zIndex\r\n        this.pitAround.zIndex = 1\r\n\r\n        // 场次id\r\n        this.matchId = null\r\n\r\n\r\n\r\n        // 隐藏结果提示框\r\n        this.result.active = false\r\n\r\n        // 隐藏获奖记录\r\n        this.main.record.node.active = false\r\n\r\n        // 设置边框的 zIndex\r\n        this.border.zIndex = 3\r\n\r\n        // 按钮 zIndex\r\n        this.stakeLayout.zIndex =\r\n        this.startBtn.zIndex = 3\r\n\r\n        // 设置下注按钮 zIndex\r\n        this.stake.zIndex = 3\r\n\r\n        // 下注值\r\n        this.stakeValue = null\r\n\r\n        // 获取场次\r\n        this.getModelList()\r\n\r\n    },\r\n\r\n    setMatch(index, id) {\r\n        const btn = this.stakeBtns[index]\r\n\r\n        btn.getComponent(cc.Sprite).spriteFrame =\r\n            this.main.spriteFrames.stakeBtnPress\r\n\r\n        const text = btn.getChildByName('text')\r\n        text.stopAllActions()\r\n        text.runAction(cc.jumpTo(1, 0, 9, 10, 3))\r\n\r\n        // 设置 当前下注值\r\n        this.setStake(index)\r\n\r\n        // 设置 当前场次 id\r\n        this.matchId = id\r\n\r\n        this.getPrizeList()\r\n\r\n    },\r\n\r\n    setStake(val) {\r\n        switch (val) {\r\n            case 1:\r\n                this.stake.getComponent(cc.Sprite).spriteFrame =\r\n                    this.main.spriteFrames.matchM\r\n                break\r\n            case 2:\r\n                this.stake.getComponent(cc.Sprite).spriteFrame =\r\n                    this.main.spriteFrames.matchL\r\n                break\r\n            default:\r\n                this.stake.getComponent(cc.Sprite).spriteFrame =\r\n                    this.main.spriteFrames.matchS\r\n                break\r\n        }\r\n    },\r\n\r\n    // 获取可玩场次\r\n    getModelList() {\r\n        this.main.api.getModelList()\r\n        .then(res => {\r\n            if (res.data.ok) {\r\n\r\n                res.data.r.forEach((item, i) => {\r\n                    this.stakeBtns[i].active = true\r\n                    this.stakeBtns[i].getChildByName('text')\r\n                        .getComponent(cc.Label).string = item.name\r\n\r\n                    this.stakeBtns[i]._matchId = item.id\r\n                    this.stakeBtns[i]._openState = item.openState\r\n                    this.stakeBtns[i]._value = item.goldExpend\r\n\r\n                    // 非开放状态\r\n                    if (!item.openState) {\r\n                        this.stakeBtns[i].getComponent(cc.Sprite)\r\n                            .spriteFrame = this.main.spriteFrames.stakeBtnDisable\r\n                    } else if (this.stakeValue === null) {\r\n                        this.stakeValue = item.goldExpend\r\n                        this.setMatch(i, item.id)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },\r\n\r\n    // 获取奖品列表\r\n    getPrizeList() {\r\n        this.main.api.getPrizeList(this.matchId)\r\n        .then(res => {\r\n            if (res.data.ok) {\r\n                this.main.gift.build(res.data.r)\r\n            }\r\n        })\r\n    },\r\n\r\n    showResult(results) {\r\n        if (results.grabResultInt === 3) {\r\n            this.result.getComponent(cc.Sprite)\r\n                .spriteFrame = cc.loader.getRes('image/game/result-win', cc.SpriteFrame)\r\n        } else {\r\n            this.result.getComponent(cc.Sprite)\r\n                .spriteFrame = cc.loader.getRes('image/game/result-fail', cc.SpriteFrame)\r\n        }\r\n\r\n        this.result.active = true\r\n        this.result.getChildByName('text')\r\n            .getComponent(cc.Label).string = results.grabResultStr\r\n        this.result.runAction(cc.sequence(\r\n            cc.jumpBy(.5, 0, 0, 10, 3),\r\n            cc.callFunc(() => {\r\n                setTimeout(() => {\r\n                    this.result.active = false\r\n                }, 1000)\r\n            })\r\n        ))\r\n\r\n\r\n    },\r\n\r\n    listen() {\r\n        // 开始按钮\r\n        this.startBtn.on(\r\n            cc.Node.EventType.TOUCH_START,\r\n            () => {\r\n                this.main.audio.clickStart.play()\r\n                this.startBtn.getComponent(cc.Sprite).spriteFrame =\r\n                    this.main.spriteFrames.startBtnPress\r\n            }\r\n        )\r\n        this.startBtn.on(\r\n            cc.Node.EventType.TOUCH_END,\r\n            () => {\r\n                this.startBtn.getComponent(cc.Sprite).spriteFrame =\r\n                    this.main.spriteFrames.startBtnNormal\r\n                if (this.matchId === null) alert('请先下注')\r\n                else if (this.main.user.balance < this.stakeValue) {\r\n                    this.main.shop.show()\r\n                }\r\n                else this.claw.fall()\r\n            }\r\n        )\r\n\r\n        // 下注按钮\r\n        this.stakeBtns.forEach((btn, index) => {\r\n            btn._index = index\r\n            btn.on(\r\n                cc.Node.EventType.TOUCH_START,\r\n                event => {\r\n\r\n                    // 禁选\r\n                    if (!btn._openState) {\r\n                        event.stopPropagation()\r\n                        return\r\n                    }\r\n\r\n                    const val = btn._value\r\n                    if (val > this.main.user.balance) {\r\n                        this.main.shop.show()\r\n                        return\r\n                    }\r\n                    this.stakeValue = val\r\n\r\n                    this.stakeBtns.forEach(btn => {\r\n                        if (btn._openState) {\r\n                            btn.getComponent(cc.Sprite).spriteFrame =\r\n                                this.main.spriteFrames.stakeBtnNormal\r\n                        } else {\r\n                            btn.getComponent(cc.Sprite).spriteFrame =\r\n                                this.main.spriteFrames.stakeBtnDisable\r\n                        }\r\n                        // 移除其他特效\r\n                        btn.getChildByName('text')\r\n                            .stopAllActions()\r\n                        btn.getChildByName('text')\r\n                            .runAction(cc.moveTo(0, 0, 18))\r\n\r\n                    })\r\n\r\n                    btn.getComponent(cc.Sprite).spriteFrame =\r\n                        this.main.spriteFrames.stakeBtnPress\r\n\r\n                    const text = btn.getChildByName('text')\r\n\r\n\r\n                    text.stopAllActions()\r\n                    text.runAction(cc.jumpTo(1, 0, 9, 10, 3))\r\n\r\n                    // 下注\r\n                    this.setStake(btn._index)\r\n\r\n\r\n                    // 设置 当前场次 id\r\n                    this.matchId = btn._matchId\r\n\r\n                    // 获取奖品列表\r\n                    this.getPrizeList()\r\n\r\n                    /*\r\n                    * 高级场切换\r\n                    */\r\n                    this.claw.setModel(this.matchId)\r\n                }\r\n            )\r\n        })\r\n\r\n        // 规则按钮\r\n        this.ruleBtn.on(\r\n            cc.Node.EventType.TOUCH_START,\r\n            () => {\r\n                this.ruleBtn.scale = .95\r\n            }\r\n        )\r\n        this.ruleBtn.on(\r\n            cc.Node.EventType.TOUCH_END,\r\n            () => {\r\n                this.ruleBtn.scale = 1\r\n                this.rule.show()\r\n            }\r\n        )\r\n\r\n        // giftBtn\r\n        this.giftBtn.on(\r\n            cc.Node.EventType.TOUCH_START,\r\n            () => {\r\n                this.giftBtn.scale = .95\r\n            }\r\n        )\r\n        this.giftBtn.on(\r\n            cc.Node.EventType.TOUCH_END,\r\n            () => {\r\n                this.giftBtn.scale = 1\r\n                this.main.record.show()\r\n            }\r\n        )\r\n\r\n        // addBtn\r\n        this.addBtn.on(\r\n            cc.Node.EventType.TOUCH_START,\r\n            () => {\r\n                this.addBtn.scale = .95\r\n            }\r\n        )\r\n        this.addBtn.on(\r\n            cc.Node.EventType.TOUCH_END,\r\n            () => {\r\n                this.addBtn.scale = 1\r\n                this.main.shop.show()\r\n            }\r\n        )\r\n    }\r\n})\r\n"
  ]
}