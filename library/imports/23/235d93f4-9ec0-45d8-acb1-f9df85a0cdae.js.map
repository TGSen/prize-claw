{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "script",
    "document",
    "createElement",
    "body",
    "appendChild",
    "onload",
    "axios",
    "defaults",
    "withCredentials",
    "src",
    "openCollision",
    "manager",
    "cc",
    "director",
    "getCollisionManager",
    "enabled",
    "location",
    "port",
    "enabledDebugDraw",
    "Class",
    "extends",
    "Component",
    "properties",
    "game",
    "default",
    "type",
    "shop",
    "audio",
    "record",
    "login",
    "onLoad",
    "gift",
    "node",
    "getChildByName",
    "getComponent",
    "api",
    "spriteFrames",
    "getUserInfo",
    "then",
    "res",
    "data",
    "ok",
    "code",
    "getParam",
    "nickname",
    "r",
    "balance",
    "phone",
    "avatar",
    "profileImg",
    "user",
    "score",
    "Label",
    "string",
    "authorize"
  ],
  "mappings": ";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAGA,IAAMA,SAASC,SAASC,aAAT,CAAuB,QAAvB,CAAf;AACAD,SAASE,IAAT,CAAcC,WAAd,CAA0BJ,MAA1B;AACAA,OAAOK,MAAP,GAAgB,YAAW;AACvBC,UAAMC,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AACH,CAFD;AAGAR,OAAOS,GAAP,GAAa,gCAAb;;AAKA,IAAMC,gBAAgB,SAAhBA,aAAgB,GAAM;AACxB,QAAMC,UAAUC,GAAGC,QAAH,CAAYC,mBAAZ,EAAhB;AACAH,YAAQI,OAAR,GAAkB,IAAlB;;AAEA;;;;AAIA,QAAIC,SAASC,IAAT,KAAkB,MAAtB,EAA8B;AAC1BN,gBAAQO,gBAAR,GAA2B,IAA3B;AACH;AACJ,CAXD;;AAcAN,GAAGO,KAAH,CAAS;AACLC,aAASR,GAAGS,SADP;AAELC,gBAAY;AACRC,cAAM;AACFC,qBAAS,IADP;AAEFC;AAFE,SADE;AAKRC,cAAM;AACFF,qBAAS,IADP;AAEFC;AAFE,SALE;AASRE,eAAO;AACHH,qBAAS,IADN;AAEHC;AAFG,SATC;AAaRG,gBAAQ;AACJJ,qBAAS,IADL;AAEJC;AAFI,SAbA;AAiBRI,eAAO;AACHL,qBAAS,IADN;AAEHC;AAFG;AAjBC,KAFP;AAwBLK,UAxBK,oBAwBI;AAAA;;AACL;AACApB;;AAEA;AACA,aAAKqB,IAAL,GAAY,KAAKC,IAAL,CAAUC,cAAV,CAAyB,MAAzB,EACPC,YADO,CACM,MADN,CAAZ;;AAGA,aAAKC,GAAL;;AAEA,aAAKC,YAAL,GAAoB,KAAKJ,IAAL,CAAUE,YAAV,CAAuB,aAAvB,CAApB;;AAEA,sBAAIG,WAAJ,GACCC,IADD,CACM,eAAO;AACT,gBAAI,CAACC,IAAIC,IAAJ,CAASC,EAAd,EAAkB;AACd,oBAAMC,OAAO,cAAIC,QAAJ,CAAa,MAAb,CAAb;AACA,oBAAID,IAAJ,EAAU;AACN,kCAAIb,KAAJ,CAAUa,IAAV,EACCJ,IADD,CACM,eAAO;AACT,4BAAIC,IAAIC,IAAJ,CAASC,EAAb,EAAiB;AACb,2CAAKG,QAAL,GAAgBL,IAAIC,IAAJ,CAASK,CAAT,CAAWD,QAA3B;AACA,2CAAKE,OAAL,GAAeP,IAAIC,IAAJ,CAASK,CAAT,CAAWC,OAA1B;AACA,2CAAKC,KAAL,GAAaR,IAAIC,IAAJ,CAASK,CAAT,CAAWE,KAAxB;AACA,2CAAKC,MAAL,GAAcT,IAAIC,IAAJ,CAASK,CAAT,CAAWI,UAAzB;AACA,kCAAKC,IAAL;;AAEA,kCAAK3B,IAAL,CAAU4B,KAAV,CAAgBjB,YAAhB,CAA6BtB,GAAGwC,KAAhC,EACKC,MADL,GACc,eAAKP,OADnB;AAEH;AACJ,qBAZD;AAaH,iBAdD,MAcO,cAAIQ,SAAJ;AACV,aAjBD,MAiBO;AACH,+BAAKV,QAAL,GAAgBL,IAAIC,IAAJ,CAASK,CAAT,CAAWD,QAA3B;AACA,+BAAKE,OAAL,GAAeP,IAAIC,IAAJ,CAASK,CAAT,CAAWC,OAA1B;AACA,+BAAKC,KAAL,GAAaR,IAAIC,IAAJ,CAASK,CAAT,CAAWE,KAAxB;AACA,+BAAKC,MAAL,GAAcT,IAAIC,IAAJ,CAASK,CAAT,CAAWI,UAAzB;AACA,sBAAKC,IAAL;;AAEA,sBAAK3B,IAAL,CAAU4B,KAAV,CAAgBjB,YAAhB,CAA6BtB,GAAGwC,KAAhC,EACKC,MADL,GACc,eAAKP,OADnB;AAEH;AACJ,SA7BD;AA+BH;AAnEI,CAAT",
  "file": "unknown",
  "sourcesContent": [
    "import Game from 'game'\r\nimport Shop from 'shop'\r\nimport Audio from 'audio'\r\nimport Record from 'record'\r\nimport Login from 'login'\r\nimport api from 'api'\r\nimport user from 'user'\r\n\r\n\r\nconst script = document.createElement('script')\r\ndocument.body.appendChild(script)\r\nscript.onload = function() {\r\n    axios.defaults.withCredentials = true\r\n}\r\nscript.src = '//cdn.yoosh.tv/js/axios.min.js'\r\n\r\n\r\n\r\n\r\nconst openCollision = () => {\r\n    const manager = cc.director.getCollisionManager()\r\n    manager.enabled = true\r\n\r\n    /*\r\n    * 开启 debug 模式\r\n    * 正式环境下关闭\r\n    */\r\n    if (location.port === '7456') {\r\n        manager.enabledDebugDraw = true\r\n    }\r\n}\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        game: {\r\n            default: null,\r\n            type: Game\r\n        },\r\n        shop: {\r\n            default: null,\r\n            type: Shop\r\n        },\r\n        audio: {\r\n            default: null,\r\n            type: Audio\r\n        },\r\n        record: {\r\n            default: null,\r\n            type: Record\r\n        },\r\n        login: {\r\n            default: null,\r\n            type: Login\r\n        }\r\n    },\r\n    onLoad() {\r\n        // 开启碰撞检测\r\n        openCollision()\r\n\r\n        //\r\n        this.gift = this.node.getChildByName('game')\r\n            .getComponent('gift')\r\n\r\n        this.api = api\r\n\r\n        this.spriteFrames = this.node.getComponent('spriteFrame')\r\n\r\n        api.getUserInfo()\r\n        .then(res => {\r\n            if (!res.data.ok) {\r\n                const code = api.getParam('code')\r\n                if (code) {\r\n                    api.login(code)\r\n                    .then(res => {\r\n                        if (res.data.ok) {\r\n                            user.nickname = res.data.r.nickname\r\n                            user.balance = res.data.r.balance\r\n                            user.phone = res.data.r.phone\r\n                            user.avatar = res.data.r.profileImg\r\n                            this.user = user\r\n\r\n                            this.game.score.getComponent(cc.Label)\r\n                                .string = user.balance\r\n                        }\r\n                    })\r\n                } else api.authorize()\r\n            } else {\r\n                user.nickname = res.data.r.nickname\r\n                user.balance = res.data.r.balance\r\n                user.phone = res.data.r.phone\r\n                user.avatar = res.data.r.profileImg\r\n                this.user = user\r\n\r\n                this.game.score.getComponent(cc.Label)\r\n                    .string = user.balance\r\n            }\r\n        })\r\n\r\n    }\r\n})\r\n"
  ]
}